webpackJsonp([1],{0:function(e,t){},"4vwm":function(e,t){},"9M+g":function(e,t){},"D9/l":function(e,t){},HKSe:function(e,t){},HdZJ:function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[n("b-navbar-brand",{attrs:{href:"#"}},[e._v("AdminUi")]),e._v(" "),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e._v(" "),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{to:"/"}},[e._v("Main")]),e._v(" "),n("b-nav-item",{attrs:{to:"/articles"}},[e._v("Articles")]),e._v(" "),n("b-nav-item",{attrs:{href:"/"}},[e._v("To Main Page")])],1)],1)],1)},staticRenderFns:[]};var a=n("VU/8")({},i,!1,function(e){n("4vwm")},null,null).exports,s=n("Zrlr"),o=n.n(s),u=n("wxAW"),c=n.n(u),l=new(function(){function e(){o()(this,e)}return c()(e,[{key:"_init",value:function(e){this.router=e}},{key:"editArticle",value:function(e){this.router.push("/articles/"+(e<<0)+"/edit")}},{key:"addArticle",value:function(){this.router.push("/articles/edit")}}]),e}()),d={created:function(){var e=this;r.default.config.errorHandler=function(t,n,r){e.notifyError(t.name,t.message,t)},window.onerror=function(t,n,r,i,a){e.notifyError(err.name,t)}},methods:{notifyError:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.error(e+" - "+t,n),this.$notify({title:e,text:t,duration:1e4,type:"error"})}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("notifications")],1)},staticRenderFns:[]};var p={name:"App",created:function(){l._init(this.$router)},components:{Navigation:a,ErrorHandler:n("VU/8")(d,f,!1,function(e){n("TZA2")},null,null).exports}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("error-handler"),this._v(" "),t("Navigation"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var m=n("VU/8")(p,h,!1,function(e){n("HdZJ")},null,null).exports,v=n("/ocq"),b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container-fluid"},[t("h1",[this._v("Main Page")]),this._v(" "),t("p",[this._v("\n    You can configure, edit and write articles\n    "),t("router-link",{attrs:{to:"/articles"}},[this._v("here")])],1)])},staticRenderFns:[]};var g,w,x,y,_,k,A,I,T=n("VU/8")({components:{}},b,!1,function(e){n("iG9t")},null,null).exports,L=n("Xxa5"),E=n.n(L),S=n("exGp"),C=n.n(S),M=n("//Fk"),R=n.n(M),U=n("Zx67"),$=n.n(U),V=n("zwoO"),F=n.n(V),H=n("Pf15"),O=n.n(H),j=n("mvHQ"),P=n.n(j),D=(g=C()(E.a.mark(function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=null,n=null!=a&&1==s?q(t,i,P()(a),"application/json"):null!=a?q(t,i,a,"text/plain"):q(t,i,null,null),e.next=5,n;case 5:if(n=e.sent,null==(r=n.headers.get("Content-Type"))||-1==r.indexOf("application/json")){e.next=9;break}return e.abrupt("return",n.json());case 9:return e.abrupt("return",n.text());case 12:throw e.prev=12,e.t0=e.catch(0),new Y(t,null,"Couldn't fetch \""+t+'" because the request failed ('+e.t0+")");case 15:case"end":return e.stop()}},e,this,[[0,12]])})),function(e){return g.apply(this,arguments)}),N=(w=C()(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(t));case 1:case"end":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)}),W=(x=C()(E.a.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(t,"POST",n,r));case 1:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)}),z=(y=C()(E.a.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(t,"PUT",n,r));case 1:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)}),B=(_=C()(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D(t,"DELETE"));case 1:case"end":return e.stop()}},e,this)})),function(e){return _.apply(this,arguments)}),Z=(k=C()(E.a.mark(function e(t,n){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new FormData,Array.isArray(n)?n.forEach(function(e){return r.append("files",e,e.name)}):r.append("files",n),e.abrupt("return",q(t,"POST",r,null));case 3:case"end":return e.stop()}},e,this)})),function(e,t){return k.apply(this,arguments)}),q=(A=C()(E.a.mark(function e(t,n,r,i){var a,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:n,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Authorization:"Bearer "+G.getToken()},redirect:"follow",referrerPolicy:"no-referrer"},null!=r&&(a.body=r,null!=i&&(a.headers["Content-Type"]=i)),e.next=5,fetch("/admin/api"+t,a);case 5:if(403!=(s=e.sent).status){e.next=9;break}throw window.location.hash="/login",new K(t,s,"Not logged in");case 9:if(s.ok){e.next=11;break}throw new Y(t,s,"Couldn't fetch \""+t+'" because of '+s.statusText+" ("+s.status+")");case 11:return e.abrupt("return",s);case 14:throw e.prev=14,e.t0=e.catch(0),new Y(t,null,"Couldn't fetch \""+t+'" because the request failed ('+e.t0+")");case 17:case"end":return e.stop()}},e,this,[[0,14]])})),function(e,t,n,r){return A.apply(this,arguments)}),J=(I=C()(E.a.mark(function e(t,n){var r,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:P()({username:t,password:n})});case 2:if((r=e.sent).ok){e.next=5;break}throw new Y(url,r,"Couldn't login because of "+r.statusText+" ("+r.status+")");case 5:if(null!=(i=r.headers.get("Authorization"))){e.next=9;break}throw new Y(url,r,"Recieved token is null");case 9:G.setToken(i);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return I.apply(this,arguments)}),G=new(function(){function e(){o()(this,e),this.token=sessionStorage.getItem("token")}return c()(e,[{key:"setToken",value:function(e){this.token=e,sessionStorage.setItem("token",e)}},{key:"getToken",value:function(){return this.token}}]),e}()),Y=function(e){function t(e,n,r){o()(this,t);var i=F()(this,(t.__proto__||$()(t)).call(this,r));return i.url=e,i.response=n,i}return O()(t,e),t}(Error),K=function(e){function t(e,n,r){return o()(this,t),F()(this,(t.__proto__||$()(t)).call(this,e,n,r))}return O()(t,e),t}(Y),X=function(){function e(t,n,r){o()(this,e),this.id=t,this.username=n,this.email=r}return c()(e,null,[{key:"fromObj",value:function(t){return null==t?null:new e(t.id,t.username,t.email)}}]),e}(),Q=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o()(this,e),this.id=t,this.name=n,this.articles=r}return c()(e,null,[{key:"fromObj",value:function(t){return null==t?null:new e(t.id,t.name,null==(n=t.articles)?null:n.map(ee.fromObj));var n}}]),e}(),ee=function(){function e(t,n,r,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=arguments[6];o()(this,e),this.id=t,this.title=n,this.description=r,this.author=i,this.shortContent=a,this.categories=s,this.headerImages=u}return c()(e,null,[{key:"fromObj",value:function(t){return null==t?null:new e(t.id,t.title,t.description,X.fromObj(t.author),t.shortContent,Q.fromObj(t.categories),t.headerImages)}},{key:"getArticles",value:function(){var e=C()(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(this.ARTICLES_URL);case 2:return t=e.sent,e.abrupt("return",t.map(this.fromObj));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getArticle",value:function(){var e=C()(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(this.ARTICLES_URL+"/"+t);case 2:return n=e.sent,e.abrupt("return",this.fromObj(n));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getText",value:function(){var e=C()(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(this.ARTICLES_URL+"/"+t+"/text");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setText",value:function(){var e=C()(E.a.mark(function e(t,n){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(this.ARTICLES_URL+"/"+t+"/text",n,!1);case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteArticle",value:function(){var e=C()(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(this.ARTICLES_URL+"/"+t.id);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateArticle",value:function(){var e=C()(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(this.ARTICLES_URL+"/"+t.id,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createArticle",value:function(){var e=C()(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(this.ARTICLES_URL,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addHeaderImages",value:function(){var e=C()(E.a.mark(function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.all(r.map(function(){var e=C()(E.a.mark(function e(r){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.addHeaderImage(t,r);case 1:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addHeaderImage",value:function(){var e=C()(E.a.mark(function e(t,n){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:z(this.ARTICLES_URL+"/"+t.id+"/headerImage/"+n.id);case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"setHeaderImages",value:function(){var e=C()(E.a.mark(function e(t,n){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.map(function(e){return e.id}),z(this.ARTICLES_URL+"/"+t.id+"/setHeaderImage",r,!0);case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"ARTICLES_URL",get:function(){return"/articles"}}]),e}(),te={props:{article:ee},methods:{deleteArticle:function(){this.$emit("delete",this.article)},editArticle:function(){this.$emit("edit",this.article)}}},ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"article-list-item-container",attrs:{title:e.article.title}},[n("b-card-text",[e._v(e._s(e.article.shortText))]),e._v(" "),n("b-button-toolbar",[n("b-button-group",[n("b-button",{attrs:{variant:"primary"},on:{click:e.editArticle}},[n("b-icon-pencil",{staticClass:"mr-2"}),e._v("Edit\n      ")],1),e._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:e.deleteArticle}},[n("b-icon-trash",{staticClass:"mr-2"}),e._v("Delete\n      ")],1)],1)],1)],1)},staticRenderFns:[]};var re=n("VU/8")(te,ne,!1,function(e){n("WADw")},"data-v-e830725a",null).exports,ie={props:{articles:Array},methods:{deleteArticle:function(e){this.$emit("delete",e)},editArticle:function(e){this.$emit("edit",e)}},components:{ArticleListItem:re}},ae={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",e._l(e.articles,function(t){return n("li",{key:t.id},[n("ArticleListItem",{attrs:{article:t},on:{delete:e.deleteArticle,edit:e.editArticle}})],1)}),0)},staticRenderFns:[]};var se={data:function(){return{articles:[]}},methods:{deleteArticle:function(e){var t=this;return C()(E.a.mark(function n(){return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ee.deleteArticle(e);case 2:t.articles=t.articles.filter(function(t){return t.id!=e.id});case 3:case"end":return n.stop()}},n,t)}))()},editArticle:function(e){l.editArticle(e.id)},addArticle:function(){l.addArticle()}},components:{ArticleList:n("VU/8")(ie,ae,!1,function(e){n("D9/l")},"data-v-3e74212e",null).exports},beforeCreate:function(){var e=this;return C()(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.getArticles();case 2:e.articles=t.sent;case 3:case"end":return t.stop()}},t,e)}))()}},oe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[n("h1",[e._v("Articles")]),e._v(" "),n("div",{attrs:{id:"article-list-toolbar"}},[n("b-button-toolbar",[n("b-button",{attrs:{variant:"primary"},on:{click:e.addArticle}},[n("b-icon-plus-circle",{staticClass:"mr-2"}),e._v("New Article\n      ")],1)],1)],1),e._v(" "),n("ArticleList",{attrs:{articles:e.articles},on:{delete:e.deleteArticle,edit:e.editArticle}})],1)},staticRenderFns:[]};var ue=n("VU/8")(se,oe,!1,function(e){n("ZT0/")},"data-v-209aeb5c",null).exports,ce=n("Dd8w"),le=n.n(ce),de=n("5x2J"),fe=n.n(de),pe=n("oOoA"),he=n.n(pe),me={name:"vue-simplemde",props:{value:String,name:String,previewClass:String,autoinit:{type:Boolean,default:function(){return!0}},highlight:{type:Boolean,default:function(){return!1}},sanitize:{type:Boolean,default:function(){return!1}},configs:{type:Object,default:function(){return{}}},previewRender:{type:Function}},data:function(){return{modelVal:""}},mounted:function(){this.autoinit&&this.initialize()},deactivated:function(){var e=this.simplemde;e&&(e.codemirror.getOption("fullScreen")&&e.toggleFullScreen())},methods:{initialize:function(){var e=le()({element:this.$el.firstElementChild,initialValue:this.value,previewRender:this.previewRender,renderingConfig:{}},this.configs);e.initialValue&&this.$emit("input",e.initialValue),this.highlight&&(e.renderingConfig.codeSyntaxHighlighting=!0),he.a.setOptions({sanitize:this.sanitize}),this.simplemde=new fe.a(e);var t=this.previewClass||"";this.addPreviewClass(t),this.bindingEvents()},bindingEvents:function(){var e=this;this.simplemde.codemirror.on("change",function(){var t=e.simplemde.value();e.handleInput(t)}),this.simplemde.codemirror.on("blur",function(){var t=e.simplemde.value();e.handleBlur(t)})},addPreviewClass:function(e){var t=this.simplemde.codemirror.getWrapperElement(),n=document.createElement("div");t.nextSibling.className+=" "+e,n.className="editor-preview "+e,t.appendChild(n)},handleInput:function(e){this.isValueUpdateFromInner=!0,this.$emit("input",e)},handleBlur:function(e){this.isValueUpdateFromInner=!0,this.$emit("blur",e)}},destroyed:function(){this.simplemde=null},watch:{value:function(e){this.isValueUpdateFromInner?this.isValueUpdateFromInner=!1:(this.simplemde.value(e),this.modelVal=e)}}},ve={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-simplemde"},[n("textarea",{staticClass:"vue-simplemde-textarea",attrs:{name:e.name},domProps:{value:e.modelVal},on:{input:function(t){return e.handleInput(t.target.value)}}})])},staticRenderFns:[]};var be=n("VU/8")(me,ve,!1,function(e){n("Wif2")},null,null).exports,ge=(n("xUBe"),function(){function e(t,n){o()(this,e),this.id=t,this.name=n}return c()(e,null,[{key:"getSupportedMimeTypes",value:function(){return N("/media/supportedMimeTypes")}},{key:"getMedia",value:function(e){return N("/media/"+e)}},{key:"getAllMedia",value:function(){return N("/media")}},{key:"deleteMedia",value:function(e){return B("/media/"+e)}},{key:"getStatus",value:function(e){return N("/media/"+e+"/status")}},{key:"uploadMedia",value:function(e){return Z("/media",e)}},{key:"downloadMedia",value:function(e){return q("/media/"+e.id+"/file","GET").then(function(e){return e.blob()}).then(function(e){return new R.a(function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onerror=n,r.readAsDataURL(e)})})}}]),e}()),we=n("pFYg"),xe=n.n(we),ye={props:{mediaList:Array,selectable:{type:Boolean,default:!1},initialSelection:{type:Array,default:function(){return[]}}},data:function(){return{images:{},selected:[],statusList:{}}},methods:{downloadMedia:function(e){var t=this;return C()(E.a.mark(function n(){var r;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ge.downloadMedia(e);case 2:r=n.sent,t.$set(t.images,e.id,r);case 4:case"end":return n.stop()}},n,t)}))()},mapToObjs:function(e){var t=this;return e.map(function(e){return t.findMedia(e)}).filter(function(e){return null!=e})},findMedia:function(e){return this.mediaList.find(function(t){return t.id==e})},deleteMedia:function(e){this.$emit("deleted",this.findMedia(e))},watchStatus:function(e){var t=this,n=e.mediaId;if(e.done){var r=this.findMedia(n);this.downloadMedia(r)}else setTimeout(C()(E.a.mark(function e(){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.getStatus(n);case 2:r=e.sent,t.statusList[n]=r,t.$set(t.statusList,n,r),t.watchStatus(r);case 6:case"end":return e.stop()}},e,t)})),1e3)}},watch:{initialSelection:function(e){this.selected=this.initialSelection.map(function(e){return"object"==(void 0===e?"undefined":xe()(e))?e.id:e})},selected:function(e){this.$emit("selected",this.mapToObjs(e))},mediaList:function(e){var t=this;e.forEach(function(e){return t.downloadMedia(e)}),e.forEach(function(e){ge.getStatus(e.id).then(function(n){t.$set(t.statusList,e.id,n),t.watchStatus(n)})})}},created:function(){var e=this;this.mediaList.forEach(function(t){return e.downloadMedia(t)})}},_e={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",e._l(e.mediaList,function(t){return n("li",{key:t.id},[n("b-card",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.selected)?e._i(e.selected,t.id)>-1:e.selected},on:{change:function(n){var r=e.selected,i=n.target,a=!!i.checked;if(Array.isArray(r)){var s=t.id,o=e._i(r,s);i.checked?o<0&&(e.selected=r.concat([s])):o>-1&&(e.selected=r.slice(0,o).concat(r.slice(o+1)))}else e.selected=a}}}),e._v("\n        "+e._s(t.fileName)+"\n        "),t.mimeType.startsWith("image/")?n("img",{attrs:{src:e.images[t.id],width:"200"}}):e._e(),e._v(" "),t.mimeType.startsWith("video/")?n("video",{attrs:{src:e.images[t.id],width:"200",controls:""}}):e._e(),e._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(n){return e.deleteMedia(t.id)}}},[e._v("Delete")]),e._v(" "),void 0!=e.statusList[t.id]?n("div",[e._v("Status: "+e._s(e.statusList[t.id].status))]):e._e()],1)],1)}),0)])},staticRenderFns:[]};var ke=n("VU/8")(ye,_e,!1,function(e){n("ReOV")},"data-v-052005e6",null).exports,Ae={props:{initialSelection:{type:Array,default:function(){return[]}}},data:function(){return{files:[],mediaList:[],supportedMediaTypes:"",uploading:!1}},methods:{upload:function(){var e=this;return C()(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.uploading=!0,t.prev=1,t.next=4,ge.uploadMedia(e.files);case 4:return t.prev=4,e.files=[],e.uploading=!1,t.finish(4);case 8:return t.next=10,ge.getAllMedia();case 10:e.mediaList=t.sent;case 11:case"end":return t.stop()}},t,e,[[1,,4,8]])}))()},deleteMedia:function(e){var t=this;return C()(E.a.mark(function n(){return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ge.deleteMedia(e.id);case 2:return n.next=4,ge.getAllMedia();case 4:t.mediaList=n.sent;case 5:case"end":return n.stop()}},n,t)}))()}},created:function(){var e=this;return C()(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ge.getAllMedia();case 2:return e.mediaList=t.sent,t.next=5,ge.getSupportedMimeTypes();case 5:e.supportedMediaTypes=t.sent.join(", ");case 6:case"end":return t.stop()}},t,e)}))()},components:{MediaList:ke}},Ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-2"},[n("b-form-file",{attrs:{placeholder:"Choose image",accept:e.supportedMediaTypes,multiple:""},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e._v(" "),e.uploading?n("b-spinner",{attrs:{variant:"primary",label:"Spinning"}}):e._e(),e._v(" "),n("b-button",{staticClass:"mt-2",attrs:{variant:"primary",disabled:0==e.files.length},on:{click:e.upload}},[e._v("Upload")]),e._v(" "),n("h2",[e._v("Images")]),e._v(" "),n("media-list",{attrs:{mediaList:e.mediaList,initialSelection:e.initialSelection},on:{selected:function(t){return e.$emit("selected",t)},deleted:function(t){return e.deleteMedia(t)}}})],1)},staticRenderFns:[]};var Te={data:function(){return{updateMode:!1,articleId:this.$route.params.id,title:"",description:"",text:"",tabIndex:0,selectedHeaderImages:[],initialSelection:[]}},created:function(){var e=this;return C()(E.a.mark(function t(){var n;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.articleId>=0)){t.next=12;break}return t.next=3,ee.getArticle(e.articleId);case 3:return n=t.sent,e.title=n.title,e.description=n.description,e.selectedHeaderImages=n.headerImages,e.initialSelection=n.headerImages,t.next=10,ee.getText(e.articleId);case 10:e.text=t.sent,e.updateMode=!0;case 12:case"end":return t.stop()}},t,e)}))()},methods:{save:function(){var e=this;return C()(E.a.mark(function t(){var n;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.updateMode){t.next=5;break}ee.updateArticle({id:e.articleId,title:e.title,description:e.description}),ee.setText(e.articleId,e.text),t.next=10;break;case 5:return t.next=7,ee.createArticle({title:e.title,description:e.description});case 7:n=t.sent,ee.setText(n.id,e.text),e.$router.back();case 10:case"end":return t.stop()}},t,e)}))()},saveHeaderImages:function(){var e=this;return C()(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.setHeaderImages({id:e.articleId},e.selectedHeaderImages);case 2:e.tabIndex=0;case 3:case"end":return t.stop()}},t,e)}))()}},components:{VueSimplemde:be,ImageUploader:n("VU/8")(Ae,Ie,!1,function(e){n("c535")},"data-v-579bc33c",null).exports}},Le={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.articleId>=0?n("h1",[e._v("Edit Article")]):n("h1",[e._v("Add Article")]),e._v(" "),n("b-form",{staticClass:"m-4"},[n("b-form-group",{attrs:{id:"title-group",label:"Title","label-for":"title-input",description:"The title of the article"}},[n("b-form-input",{attrs:{id:"title-input",type:"text"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("b-form-group",{attrs:{id:"description-group",label:"Description","label-for":"description-input",description:"The description of the article"}},[n("b-form-textarea",{attrs:{id:"description-input",type:"text"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.save}},[e._v("Save Article")])],1),e._v(" "),n("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("b-tab",{attrs:{title:"Edit Article",active:""}},[n("vue-simplemde",{model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),e._v(" "),n("b-tab",{attrs:{title:"Header Images"}},[n("image-uploader",{attrs:{initialSelection:e.initialSelection},on:{selected:function(t){return e.selectedHeaderImages=t}}}),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.saveHeaderImages}},[e._v("Save Header Images")])],1)],1)],1)},staticRenderFns:[]};var Ee=n("VU/8")(Te,Le,!1,function(e){n("UEcF")},"data-v-686e3384",null).exports,Se={data:function(){return{form:{username:"",password:""},wrongLoginAlert:!1}},methods:{onSubmit:function(){var e=this;return C()(E.a.mark(function t(){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J(e.form.username,e.form.password);case 3:0==window.history.length?e.$router.push("/"):e.$router.back(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.wrongLoginAlert=!0;case 9:case"end":return t.stop()}},t,e,[[0,6]])}))()}}},Ce={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login-pane"}},[n("b-card",{attrs:{title:"Login"}},[n("b-alert",{attrs:{show:e.wrongLoginAlert,variant:"danger"}},[e._v("Wrong Username or Password")]),e._v(" "),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("b-form-group",{attrs:{label:"Username:","label-for":"username",description:"Enter your your username"}},[n("b-form-input",{attrs:{id:"username",type:"text",required:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Password:","label-for":"password",description:"Enter your your password"}},[n("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Login")])],1)],1)],1)},staticRenderFns:[]};var Me=n("VU/8")(Se,Ce,!1,function(e){n("HKSe")},null,null).exports;r.default.use(v.a);var Re=new v.a({routes:[{path:"/",name:"Main",component:T},{path:"/articles",name:"Articles",component:ue,children:[]},{name:"Edit Article",path:"/articles/:id/edit",component:Ee},{name:"Add Article",path:"/articles/edit",component:Ee},{path:"/login",name:"Login",component:Me}]}),Ue=n("NYxO"),$e=n("Tqaz"),Ve=(n("Jmt5"),n("9M+g"),n("CLX7")),Fe=n.n(Ve);r.default.config.productionTip=!1,r.default.use(Fe.a),r.default.use($e.a),r.default.use($e.b),r.default.use(Ue.a),new r.default({el:"#app",router:Re,components:{App:m},template:"<App/>"})},ReOV:function(e,t){},TZA2:function(e,t){},UEcF:function(e,t){},WADw:function(e,t){},Wif2:function(e,t){},"ZT0/":function(e,t){},c535:function(e,t){},iG9t:function(e,t){},xUBe:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5a6a0eb67e25cf09f283.js.map